
<!DOCTYPE html>
<html lang='en'>
<head>
<title>Configuring VPC Network Peering | Qwiklabs</title>
<meta name="action-cable-url" content="/cable" />
<script>
//<![CDATA[
window.gon={};gon.deployment="googlecoursera-run";
//]]>
</script>
<script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer',"GTM-5XSKHDX");
</script>
<script src="https://cdn.qwiklabs.com/assets/hallofmirrors/polyfills/webcomponents-loader-b1b28b59480cca2ab0c23485f64ba2ec8893bdc9.js"></script>
<script src="https://cdn.qwiklabs.com/assets/vendor-484f429ecd41bc910509948cecaf71d98c510234.js"></script>
<script src="https://cdn.qwiklabs.com/assets/application-644b7af44e10b6334d7881042d33e7eac427c3b8.js"></script>
<script src="https://cdn.qwiklabs.com/assets/hallofmirrors/hallofmirrors-011e84c80a51010837f8d7868d0972aebf80b2b1.js"></script>
<script id='ze-snippet' src='https://static.zdassets.com/ekr/snippet.js?key=511e4158-0aec-4e3c-b2e6-4daa1769f51e'></script>


<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="+gMT0bQLPwH99ASS1EIzymSOpsGWlPPduXy40XTz/BPLiEfSeF4Dyks6uTo40SFF4FLnz6DiGlTUAClY25wdvA==" />
<meta content='width=device-width, initial-scale=1.0, user-scalable=yes' name='viewport'>
<meta content='1rRsY0INj8RvwB5EF5pwdxt2A2P9aDgAlsICaJ0d5w0' name='google-site-verification'>
<meta content='#3681E4' property='msapplication-TileColor'>
<meta content='/favicon-144.png' property='msapplication-TileImage'>
<meta content='[{&quot;id&quot;:&quot;recaptcha_experiment&quot;,&quot;optimize_id&quot;:&quot;dpViOcLkT3qS4TvL2mRojA&quot;,&quot;title&quot;:&quot;No Recaptcha shown for trusted users&quot;,&quot;variant_index&quot;:0,&quot;variant&quot;:&quot;original&quot;}]' name='active-experiments'>
<meta content='{&quot;userId&quot;:12197799,&quot;experimentIds&quot;:[&quot;barker&quot;,&quot;community_forum&quot;,&quot;enforce_codebuild_verdicts&quot;,&quot;used_in&quot;,&quot;content_provider_admin&quot;,&quot;program_announcements&quot;,&quot;organization_announcements&quot;,&quot;organization_learning_plans&quot;,&quot;course_upgrade&quot;,&quot;show_annual_purchase_now&quot;,&quot;oauth_risc_shutoff&quot;,&quot;program_learning_assignment&quot;,&quot;teams&quot;,&quot;peer_assignment&quot;,&quot;chat_off_for_signed_out_users&quot;,&quot;canonical_domain_redirect&quot;,&quot;alexandria_show_bundle_errors&quot;]}' name='help-api-product-data'>
<meta content='{&quot;groupIds&quot;:[&quot;non_suadmins&quot;,&quot;students&quot;,&quot;non_organization&quot;,&quot;non_program&quot;]}' name='help-api-custom-data'>
<meta content='In this lab, you configure VPC Network Peering between two networks. Then, you verify private communication between two VMs in those networks.' name='description'>
<meta content='Qwiklabs' name='author'>
<meta content='Configuring VPC Network Peering | Qwiklabs' property='og:title'>
<meta content='website' property='og:type'>
<meta content='/favicon-144.png' property='og:image'>
<meta content='Qwiklabs' property='og:site_name'>
<meta content='In this lab, you configure VPC Network Peering between two networks. Then, you verify private communication between two VMs in those networks.' property='og:description'>
<meta content='/qwiklabs_logo_900x887.png' property='og:logo' size='900x887'>
<meta content='/qwiklabs_logo_994x187.png' property='og:logo' size='994x187'>


<meta property="og:url" content="https://googlecoursera.qwiklabs.com/focuses/32796232?parent=lti_session" /><link href="https://googlecoursera.qwiklabs.com/focuses/32796232?parent=lti_session" rel="canonical" />
<link color='#3681E4' href='/favicon-svg.svg' rel='mask-icon'>
<link href='/favicon-180.png' rel='apple-touch-icon-precomposed'>
<link href='/favicon-32.png' rel='shortcut icon' type='image/x-icon'>


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oswald:400|Roboto+Mono:400,700|Roboto:300,400,500,700|Google+Sans:300,400,500,700|Google+Sans+Display:400|Material+Icons|Google+Material+Icons|Google+Sans+Text:400,500,700" media="screen" />

<link rel="stylesheet" href="https://cdn.qwiklabs.com/assets/application-2bce1f34bff374bb8e1de389ce3467c39fc4868b.css" media="all" />
<link rel="stylesheet" href="https://www.gstatic.com/glue/cookienotificationbar/cookienotificationbar.min.css" media="screen" />


<style>
  :root {
    --primary-text-on-surface-color: #1a73e8;
    --primary-text-on-surface-color-dark: #1568d6;
    --primary-text-on-surface-color-darker: #135ec1;
    --primary-text-on-surface-color-darkest: #1154ac;
    --primary-surface-color: #1a73e8;
    --primary-surface-color-rgb: 26,115,232;
    --primary-surface-color-light: #d1e3fa;
    --primary-surface-color-lightest: #e8f1fd;
    --text-on-primary-color: #ffffff;
    --accent-text-on-surface-color: #f29900;
    --accent-surface-color: #f9ab00;
    --accent-surface-color-rgb: 249,171,0;
    --accent-surface-color-light: #ffefcc;
    --text-on-accent-color: #202124;
  }
</style>



</head>
<body class='lab-show l-full no-nav application-new focuses focuses-show lab-show l-full no-nav '>
<div class='header-container'>
<div class='header'>
<ql-toolbar jumpEnabled>
<div class='header__title' slot='title'>
<ql-icon-button label="Back" href="https://www.coursera.org/" id="c18ae12f4a9878cf" target="_self" tip="Back">arrow_back</ql-icon-button>
<h1 class='ql-title-medium'>Configuring VPC Network Peering</h1>
</div>
<div class='header__actions' slot='action'>
<ql-icon-button id='control-panel-target' style='display: none;'>
dashboard
</ql-icon-button>
<ql-menu for='control-panel-target' id='control-panel-menu'></ql-menu>
<ql-icon-button class='mobile-hide' icon='help_outline' id='help-menu-button' label='Open help menu' tip='Help'></ql-icon-button>
<ql-menu for='help-menu-button' id='help-menu'>
<ql-menu-item data-analytics-action='opened_help' data-analytics-label='lab' label='Help Center' onclick='hallofmirrors.helpService.startHelp({&quot;productData&quot;:{&quot;userId&quot;:12197799},&quot;context&quot;:&quot;lab&quot;})'></ql-menu-item>
<ql-menu-item href='mailto:support@qwiklabs.com' label='Email support'></ql-menu-item>
<ql-menu-item label='Chat support' onClick='ql.chat.open()'></ql-menu-item>
</ql-menu>

<ql-icon-button class='mobile-hide' icon='language' id='language' label='Select your language preference' tip='Language'></ql-icon-button>
<ql-menu for='language'>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='ar' href='/focuses/32796232?locale=ar&amp;parent=lti_session' label='العربية‬‎' lang='ar'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='de' href='/focuses/32796232?locale=de&amp;parent=lti_session' label='Deutsch' lang='de'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='en' href='/focuses/32796232?locale=en&amp;parent=lti_session' label='English' lang='en'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='es' href='/focuses/32796232?locale=es&amp;parent=lti_session' label='español (Latinoamérica)' lang='es'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='fr' href='/focuses/32796232?locale=fr&amp;parent=lti_session' label='français' lang='fr'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='fr_CA' href='/focuses/32796232?locale=fr_CA&amp;parent=lti_session' label='français (Canada)' lang='fr-CA'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='he' href='/focuses/32796232?locale=he&amp;parent=lti_session' label='עברית' lang='he'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='id' href='/focuses/32796232?locale=id&amp;parent=lti_session' label='bahasa Indonesia' lang='id'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='it' href='/focuses/32796232?locale=it&amp;parent=lti_session' label='Italiano' lang='it'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='ja' href='/focuses/32796232?locale=ja&amp;parent=lti_session' label='日本語' lang='ja'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='ko' href='/focuses/32796232?locale=ko&amp;parent=lti_session' label='한국어' lang='ko'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='pl' href='/focuses/32796232?locale=pl&amp;parent=lti_session' label='Polski' lang='pl'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='pt_BR' href='/focuses/32796232?locale=pt_BR&amp;parent=lti_session' label='português (Brasil)' lang='pt-BR'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='pt_PT' href='/focuses/32796232?locale=pt_PT&amp;parent=lti_session' label='português (Portugal)' lang='pt-PT'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='ru' href='/focuses/32796232?locale=ru&amp;parent=lti_session' label='русский' lang='ru'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='tr' href='/focuses/32796232?locale=tr&amp;parent=lti_session' label='Türkçe' lang='tr'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='uk' href='/focuses/32796232?locale=uk&amp;parent=lti_session' label='український' lang='uk'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='zh' href='/focuses/32796232?locale=zh&amp;parent=lti_session' label='简体中文' lang='zh'></ql-menu-item>
<ql-menu-item data-analytics-action='changed_locale' data-analytics-label='zh_TW' href='/focuses/32796232?locale=zh_TW&amp;parent=lti_session' label='繁體中文' lang='zh-TW'></ql-menu-item>
</ql-menu>


<ql-icon-button id='my_account' label='My account' tip='My account'>
<ql-avatar src='https://lh3.googleusercontent.com/a/ACg8ocI6s7UhNvX_oCOJMPhLJPmqhqIgwu_5AK0t7wpjF-5jmQo=s320-c'></ql-avatar>
</ql-icon-button>
<ql-menu for='my_account' id='my_account_menu' style='max-height: 640px'>
<div class='my-account-menu'>
<ql-avatar class='l-mtl l-mbl' size='120' src='https://lh3.googleusercontent.com/a/ACg8ocI6s7UhNvX_oCOJMPhLJPmqhqIgwu_5AK0t7wpjF-5jmQo=s320-c'></ql-avatar>
<div class='my-account-menu__user-info l-mbl'>
<h4 class='ql-title-medium'>Justin Ho</h4>
<p class='ql-body-medium text--light'>cliffdove@gmail.com</p>
<p class='ql-body-medium text--light'>
</p>
<a class="text--green ql-title-small" href="/my_account/payments"><ql-chip positive>
0 Credits
</ql-chip>
</a></div>
<div class='buttons l-mbl'>
<a class="button button--hairline" id="settings" href="/my_account/profile">Settings</a>
</div>
<hr>
<ql-button data-analytics-action='clicked_sign_out' href='/users/sign_out' method='delete'>
Sign Out
</ql-button>
<div class='privacy l-mtl'>
<a target="_blank" class="ql-label-medium text--light" href="/privacy_policy">Privacy</a>
<span class='ql-label-medium text--light l-mls l-mrs'>&middot;</span>
<a class="ql-label-medium text--light" href="/terms_of_service">Terms</a>
</div>
</div>
</ql-menu>

</div>
</ql-toolbar>

</div>
</div>

<nav class='nav-panel js-nav-panel'>
<div class='nav-panel__logo'>
<div class="custom-logo">Qwiklabs</div>
</div>
<nav class='ql-sidenav'>
<ql-sidenav-item href='/' icon='home' label='Home'></ql-sidenav-item>

<ql-sidenav-item href='/catalog' icon='school' label='Catalog'></ql-sidenav-item>

<ql-sidenav-item href='/profile' icon='event_note' label='Profile'></ql-sidenav-item>

</nav>

</nav>
<div class='nav-panel__overlay js-nav-toggle'></div>

<main class='js-main' id='jump-content'>
<div class='l-main-wrapper' id='main-wrapper'>




<div class='lab-assessment__tab js-open-lab-assessment-panel'>
<button class='js-lab-assessment-total-score'>
—/100
</button>
</div>
<div aria-labelledby='lab-assessment-checkpoint' class='lab-assessment__panel js-lab-assessment-panel' role='dialog'>
<div class='lab-assessment__panel__header'>
<h4 id='lab-assessment-checkpoint'>Checkpoints</h4>
<ql-icon-button class='js-close-lab-assessment-panel' icon='arrow_forward' label='Close dialog'></ql-icon-button>
</div>
<div class='lab-assessment__step'>
<p class='lab-assessment__step__title' id='lab-assessment-step-title'>
Configuring VPC Network Peering
</p>
<div class='lab-assessment__step__action'>
<ql-button class='js-show-run-step-button' description='Configuring VPC Network Peering' step_no='1'>
Check my progress
</ql-button>
<p class='lab-assessment__step__score'>
<span class='js-assessment-step-score-1'>
</span>
/ 100
</p>
</div>
</div>

</div>
<ql-drawer-container class='js-lab-state' data-analytics-payload='{&quot;label&quot;:&quot;Configuring VPC Network Peering&quot;,&quot;lab_name&quot;:&quot;Configuring VPC Network Peering&quot;,&quot;classroom_name&quot;:null,&quot;deployment&quot;:&quot;googlecoursera-run&quot;}' data-credits='0.0' data-focus-id='32796232' data-lab-billing-limit='0.0' data-lab-duration='3600' data-parent='lti_session' data-recaptcha-enabled id='lab-container'>
<ql-drawer id='terminal-drawer' slot='drawer'>
<iframe allow='clipboard-read' class='terminal' id='embedded-resource'></iframe>
</ql-drawer>
<ql-drawer-content class='js-lab-wrapper' id='lab-content' slot='drawer-content'>
<ql-drawer-container id='lab-content-container'>
<ql-drawer id='control-panel-drawer' open slot='drawer' width='320'>
<ql-lab-control-panel class='ql-lab-control-panel__max-height control-panel js-lab-control-panel' connectionFiles='[]' labControlButton='{&quot;disabled&quot;:false,&quot;pending&quot;:false,&quot;running&quot;:false}' labDetails='[]' labTimer='{&quot;ticking&quot;:false,&quot;secondsRemaining&quot;:3600}' studentResources='[]'>
<script src="https://www.recaptcha.net/recaptcha/api.js?render=6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr"   ></script>
        <script>
          // Define function so that we can call it again later if we need to reset it
          // This executes reCAPTCHA and then calls our callback.
          function executeRecaptchaForStartLab() {
            grecaptcha.ready(function() {
              grecaptcha.execute('6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr', {action: 'start_lab'}).then(function(token) {
                setInputWithRecaptchaResponseTokenForStartLab('g-recaptcha-response-data-start-lab', token)
              });
            });
          };
          // Invoke immediately
          executeRecaptchaForStartLab()

          // Async variant so you can await this function from another async function (no need for
          // an explicit callback function then!)
          // Returns a Promise that resolves with the response token.
          async function executeRecaptchaForStartLabAsync() {
            return new Promise((resolve, reject) => {
             grecaptcha.ready(async function() {
                resolve(await grecaptcha.execute('6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr', {action: 'start_lab'}))
              });
            })
          };

                  var setInputWithRecaptchaResponseTokenForStartLab = function(id, token) {
          var element = document.getElementById(id);
          if (element !== null) element.value = token;
        }

        </script>
<input type="hidden" name="g-recaptcha-response-data[start_lab]" id="g-recaptcha-response-data-start-lab" data-sitekey="6LeVI8IUAAAAAJNdox5eTkYrw9SbvhZ1TFyv3iHr" class="g-recaptcha g-recaptcha-response "/>

<div aria-live='polite' class='hidden' id='recaptcha-v2-start-lab' slot='recaptcha'>
<script src="https://www.recaptcha.net/recaptcha/api.js" async defer ></script>
<div data-sitekey="6LeOI8IUAAAAAPkHlMAE9NReCD_1WD81iYlBlCnV" data-callback="recaptchaComplete" data-expired-callback="expireV2Token" class="g-recaptcha "></div>
          <noscript>
            <div>
              <div style="width: 302px; height: 422px; position: relative;">
                <div style="width: 302px; height: 422px; position: absolute;">
                  <iframe
                    src="https://www.recaptcha.net/recaptcha/api/fallback?k=6LeOI8IUAAAAAPkHlMAE9NReCD_1WD81iYlBlCnV"
                    name="ReCAPTCHA"
                    style="width: 302px; height: 422px; border-style: none; border: 0; overflow: hidden;">
                  </iframe>
                </div>
              </div>
              <div style="width: 300px; height: 60px; border-style: none;
                bottom: 12px; left: 25px; margin: 0px; padding: 0px; right: 25px;
                background: #f9f9f9; border: 1px solid #c1c1c1; border-radius: 3px;">
                <textarea id="g-recaptcha-response" name="g-recaptcha-response"
                  class="g-recaptcha-response"
                  style="width: 250px; height: 40px; border: 1px solid #c1c1c1;
                  margin: 10px 25px; padding: 0px; resize: none;">
                </textarea>
              </div>
            </div>
          </noscript>

</div>
</ql-lab-control-panel>
</ql-drawer>
<ql-drawer-content id='lab-instructions' slot='drawer-content'>
<div class='lab-content-container'>
<div class='alert alert--fake js-alert'>
<p class='alert__message js-alert-message' role='alert'></p>
<ql-icon-button class='alert__close js-alert-close' icon='clear'></ql-icon-button>
<iframe class='l-ie-iframe-fix' tabindex='-1'></iframe>
</div>
<div class='lab-content__renderable-instructions js-lab-content'>
<div class='lab-preamble'>
<h1 class='lab-preamble__title'>
Configuring VPC Network Peering
</h1>
<div class='lab-preamble__details ql-title-medium'>
<span>1 hour</span>
<span>Free</span>
<div class='lab__rating'>
<a aria-label="Lab Reviews" href="/focuses/32796232/reviews?parent=lti_session"><div class='rateit' data-rateit-readonly='true' data-rateit-value='4.6539'></div>

</a></div>
</div>
</div>
<div class='lab-outline-place-holder'></div>

<div class='markdown-lab-instructions js-markdown-instructions' id='markdown-lab-instructions'>

<h2 id="step1">Overview</h2>
<p>In this lab, you configure VPC network peering between two networks. Then you verify private communication between two VMs in those networks, as illustrated in this diagram.</p>
<p><img alt="Network architecture diagram" src="https://cdn.qwiklabs.com/RfheBecNT101SeR66w1xHwGgkyupAa73iLbU%2FM0M4Ic%3D"></p>
<p>VPC network peering allows you to build SaaS (Software as a service) ecosystems in Google Cloud, which makes services available privately across different VPC networks within and across organizations. This allows workloads to communicate in private RFC 1918 space.</p>
<p>VPC network peering gives you several advantages over using external IP addresses or VPNs to connect networks, including:</p>
<ul>
<li>
<p><strong>Network latency:</strong> Public IP networking results in higher latency than private networking.</p>
</li>
<li>
<p><strong>Network security:</strong> Service owners do not need to have their services exposed to the public internet and deal with its associated risks.</p>
</li>
<li>
<p><strong>Network cost:</strong> Google Cloud charges <a href="https://cloud.google.com/compute/pricing#internet_egress" target="_blank">egress bandwidth pricing</a> for networks using external IPs to communicate, even if the traffic is within the same zone. If, however, the networks are peered, they can use internal IPs to communicate and save on those egress costs. <a href="https://cloud.google.com/compute/pricing#network" target="_blank">Regular network pricing</a> still applies to all traffic.</p>
</li>
</ul>
<h3>Objectives</h3>
<p>In this lab, you will learn how to perform the following tasks:</p>
<ul>
<li>
<p>Explore connectivity between non-peered VPC networks.</p>
</li>
<li>
<p>Configure VPC network peering.</p>
</li>
<li>
<p>Verify private communication between peered VPC networks.</p>
</li>
<li>
<p>Delete VPC network peering.</p>
</li>
</ul>
<h2 id="step2">Setup and requirements</h2>
<p>For each lab, you get a new Google Cloud project and set of resources for a fixed time at no cost.</p>
<ol>
<li>
<p>Sign in to Qwiklabs using an <strong>incognito window</strong>.</p>
</li>
<li>
<p>Note the lab's access time (for example, <code>1:15:00</code>), and make sure you can finish within that time.<br>
There is no pause feature. You can restart if needed, but you have to start at the beginning.</p>
</li>
<li>
<p>When ready, click <strong>Start lab</strong>.</p>
</li>
<li>
<p>Note your lab credentials (<strong>Username</strong> and <strong>Password</strong>). You will use them to sign in to the Google Cloud Console.</p>
</li>
<li>
<p>Click <strong>Open Google Console</strong>.</p>
</li>
<li>
<p>Click <strong>Use another account</strong> and copy/paste credentials for <strong>this</strong> lab into the prompts.<br>
If you use other credentials, you'll receive errors or <strong>incur charges</strong>.</p>
</li>
<li>
<p>Accept the terms and skip the recovery resource page.</p>
</li>
</ol>
<aside class="warning"><p><strong>Note:</strong> Do not click <strong>End Lab</strong> unless you have finished the lab or want to restart it. This clears your work and removes the project.
  </p>
</aside>
<h2 id="step3">Task 1. Explore connectivity between non-peered VPC networks</h2>
<p>Each Google Cloud project starts with the <strong>default</strong> network. In addition, <strong>mynetwork</strong>, <strong>privatenet</strong>, and <strong>managementnet</strong> have been created for you along with firewall rules to allow ICMP-SSH-RDP traffic and four VM instances.</p>
<h3><strong>Verify VPC network peering requirements</strong></h3>
<p>In a peered VPC network, no subnet IP range can overlap with another subnet IP range. Therefore, verify that the CIDR blocks of the subnets of <strong>mynetwork</strong> and <strong>privatenet</strong> are non-overlapping.</p>
<ol>
<li>
<p>In the Cloud Console, on the <strong>Navigation menu</strong> (<img alt="Navigation menu icon" src="https://cdn.qwiklabs.com/tkgw1TDgj4Q%2BYKQUW4jUFd0O5OEKlUMBRYbhlCrF0WY%3D">), click <strong>VPC network &gt; VPC networks</strong>.</p>
</li>
<li>
<p>Examine the <strong>IP addresses ranges</strong> for the subnets of <strong>mynetwork</strong>.</p>
<p>The subnets of <strong>mynetwork</strong> fit within the <code>10.128.0.0/9</code> CIDR block. As new Google Cloud regions become available, new subnets in those regions are automatically added to this auto mode network using an IP range from that block.</p>
</li>
<li>
<p>Examine the <strong>IP addresses ranges</strong> for the subnets of <strong>privatenet</strong>.</p>
<p>The subnets of <strong>privatenet</strong> fit within the <code>172.16.0.0/24</code> and <code>172.20.0.0/24</code> CIDR blocks. They do not overlap with the <code>10.128.0.0/9</code> CIDR block of <strong>mynetwork</strong>.</p>
</li>
</ol>
<ql-infobox><strong>Note: </strong>You can configure VPC network peering between <strong>mynetwork</strong> and <strong>privatenet</strong> because their subnets' CIDR blocks are non-overlapping.
</ql-infobox>
<h3>Explore the connectivity between mynetwork and privatenet</h3>
<p>Before configuring VPC network peering, explore the current connectivity between <strong>mynetwork</strong> and <strong>privatenet</strong>.</p>
<p><ql-true-false-probe answer="false" stem="You should be able to ping the internal and external IP addresses of privatenet-us-vm from mynet-us-vm.">
</ql-true-false-probe></p>
<ol>
<li>
<p>On the <strong>Navigation menu</strong> (<img alt="Navigation menu icon" src="https://cdn.qwiklabs.com/tkgw1TDgj4Q%2BYKQUW4jUFd0O5OEKlUMBRYbhlCrF0WY%3D">), click <strong>VPC network &gt; VPC network peering</strong>.<br>
Notice that there is no peering connection.</p>
<p>You will return to this page to configure the VPC network peering connections.</p>
</li>
<li>
<p>On the <strong>Navigation menu</strong>, click <strong>VPC network &gt; Routes</strong>.</p>
</li>
<li>
<p>Specify the following:</p>
<table>

<tr>
<th>Property</th>
<th>Value (type value or select option as specified)</th>
</tr>


<tr>
<td>Network</td>
<td>mynetwork</td>
</tr>
<tr>
<td>Region</td>
<td><ql-variable key="project_0.default_region" placeholder="&lt;filled at lab start&gt;"></ql-variable></td>
</tr>

</table>
</li>
<li>
<p>Click <strong>View</strong>.
Notice that none of the routes have a peering connection as the <strong>Next hop</strong>.</p>
<p>You will return to this page after configuring the VPC network peering connection.</p>
</li>
<li>
<p>On the <strong>Navigation menu</strong>, click <strong>VPC network &gt; Firewall</strong>.<br>
Notice the allow <strong>SSH</strong> and <strong>ICMP</strong> firewall rules under Protocol / ports for <strong>mynetwork</strong> and <strong>privatenet</strong>.
These firewall rules have been created for you.</p>
</li>
<li>
<p>On the <strong>Navigation menu</strong>, click <strong>Compute Engine &gt; VM instances</strong>.<br>
Notice the <strong>mynet-eu-vm</strong>, <strong>mynet-us-vm</strong>, <strong>privatenet-us-vm</strong>, and <strong>managementnet-us-vm</strong> instances.</p>
<p>These VM instances have been created for you.</p>
</li>
<li>
<p>Note the internal and external IP addresses for <strong>privatenet-us-vm</strong>.</p>
</li>
<li>
<p>For <strong>mynet-us-vm</strong>, click <strong>SSH</strong> to launch a terminal and connect.</p>
</li>
<li>
<p>To test connectivity to <strong>privatenet-us-vm</strong>'s external IP, run the following command, replacing <strong>privatenet-us-vm</strong>'s external IP:</p>
</li>
</ol>
<ql-code-block language="plaintext">
ping -c 3 &lt;Enter privatenet-us-vm's external IP here&gt;
</ql-code-block>
<p>This should work!</p>
<ol start="10">
<li>
<p>To test connectivity to <strong>privatenet-us-vm</strong>'s internal IP, run the following command, replacing <strong>privatenet-us-vm</strong>'s internal IP:</p>
</li>
</ol>
<ql-code-block language="plaintext">
ping -c 3 &lt;Enter privatenet-us-vm's internal IP here&gt;
</ql-code-block>
<ql-warningbox><strong>Note: </strong>This should not work, as indicated by a 100% packet loss! But why?
</ql-warningbox>
<ol start="11">
<li>On the VM instances page, click <strong>Columns</strong>, and then select <strong>Network</strong>.</li>
</ol>
<ql-infobox><strong>Note: </strong>The <strong>mynet-us-vm</strong> and <strong>privatenet-us-vm</strong> instances are in the same zone (<ql-variable key="project_0.default_zone" placeholder="&lt;filled at lab start&gt;"></ql-variable>) but in different VPC networks (<strong>mynetwork</strong> and <strong>privatenet</strong>). Because VPC network peering has not been configured between those networks, private communication fails between the instances of those networks.
</ql-infobox>
<ol start="12">
<li>
<p>Close the SSH terminal to <strong>mynet-us-vm</strong>:</p>
</li>
</ol>
<ql-code-block language="plaintext">
exit
</ql-code-block>
<h2 id="step4">Task 2. Configure VPC network peering</h2>
<p>VPC network peering can be configured for different VPC networks within and across organizations. Configure the following peering connections in this project:</p>
<ul>
<li>
<strong>peering-1-2</strong>: Peer <strong>mynetwork</strong> with <strong>privatenet</strong>
</li>
<li>
<strong>peering-2-1</strong>: Peer <strong>privatenet</strong> with <strong>mynetwork</strong>
</li>
</ul>
<p>Each side of a peering association is set up independently. Peering is active only when the configuration from both sides matches.</p>
<h3>Create peering 1-2</h3>
<p>Peer <strong>mynetwork</strong> with <strong>privatenet</strong>.</p>
<ol>
<li>In the Cloud Console, on the <strong>Navigation menu</strong> (<img alt="Navigation menu" src="https://cdn.qwiklabs.com/tkgw1TDgj4Q%2BYKQUW4jUFd0O5OEKlUMBRYbhlCrF0WY%3D" title="Navigation menu">), click <strong>VPC network</strong> &gt; <strong>VPC network peering</strong>.</li>
<li>Click <strong>Create connection</strong>.</li>
<li>Read through the requirements.</li>
</ol>
<ql-infobox><strong>Note: </strong>You won't need the <strong>project ID</strong> because you are connecting to a VPC network within the same project.
</ql-infobox>
<ol start="4">
<li>
<p>Click <strong>Continue</strong>.</p>
</li>
<li>
<p>Specify the following, and leave the remaining settings as their defaults:</p>
<table>

<tr>
<th>Property</th>
<th>Value (type value or select option as specified)</th>
</tr>


<tr>
<td>Name</td>
<td>peering-1-2</td>
</tr>
<tr>
<td>Your VPC Network</td>
<td>mynetwork</td>
</tr>
<tr>
<td>VPC network name</td>
<td>privatenet</td>
</tr>

</table>
</li>
</ol>
<ql-infobox><strong>Note: </strong>If you peered with a VPC network in another project, you would need the <strong>Network admin</strong> or <strong>Project owner/editor</strong> IAM role for that project to create a peering connection.
</ql-infobox>
<ol start="6">
<li>Click <strong>Create</strong>.</li>
</ol>
<ql-warningbox><strong>Note:</strong> At this point, the peering status remains <strong>INACTIVE</strong> because the other side has not been configured, the networks are not yet peered.
</ql-warningbox>
<h3>Create peering 2-1</h3>
<p>Peer <strong>privatenet</strong> with <strong>mynetwork</strong>.</p>
<ol>
<li>
<p>In the Cloud Console, return to the <strong>VPC network peering</strong> page.</p>
</li>
<li>
<p>Click <strong>Create peering connection</strong>.</p>
</li>
<li>
<p>Click <strong>Continue</strong>.</p>
</li>
<li>
<p>Specify the following, and leave the remaining settings as their defaults:</p>
<table>

<tr>
<th>Property</th>
<th>Value (type value or select option as specified)</th>
</tr>


<tr>
<td>Name</td>
<td>peering-2-1</td>
</tr>
<tr>
<td>Your VPC Network</td>
<td>privatenet</td>
</tr>
<tr>
<td>VPC network name</td>
<td>mynetwork</td>
</tr>

</table>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
<ql-infobox><strong>Note: </strong>As expected, the peering status changes to <strong>ACTIVE</strong> when the configuration from both sides matches.
</ql-infobox>
<p>Click <em>Check my progress</em> to verify the objective.
<ql-activity-tracking step="1">
Configure VPC Network Peering
</ql-activity-tracking></p>
<h2 id="step5">Task 3. Verify private communication between peered VPC networks</h2>
<p>Verify private RFC 1918 connectivity across <strong>mynetwork</strong> and <strong>privatenet</strong>.</p>
<h3>Verify routes between networks</h3>
<p>Verify that routes have been established between <strong>mynetwork</strong> and <strong>privatenet</strong>.</p>
<ol>
<li>In the Cloud Console, on the <strong>Navigation menu</strong> (<img alt="Navigation menu icon" src="https://cdn.qwiklabs.com/tkgw1TDgj4Q%2BYKQUW4jUFd0O5OEKlUMBRYbhlCrF0WY%3D" title="Navigation menu">), click <strong>VPC network &gt; Routes</strong>.</li>
<li>For Network, select <strong>mynetwork</strong>.</li>
<li>For Region, select <ql-variable key="project_0.default_region" placeholder="&lt;filled at lab start&gt;"></ql-variable>.</li>
</ol>
<p>Notice that there is a route for each subnet in <strong>mynetwork</strong> with <strong>peering-1-2</strong> as the <strong>Next hop</strong>. If you switch to <strong>privatenet</strong>, notice that there is a route for each subnet in <strong>privatenet</strong> with <strong>peering-2-1</strong> as the <strong>Next hop</strong>.</p>
<p>These routes were automatically created with the VPC peering connection.</p>
<ql-infobox><strong>Note: </strong>User-configured routes are not propagated across peered networks. If you configure a route in a network to a destination in a VPC network, that destination will not be reachable from a peered network.</ql-infobox>
<h3>Ping from mynetwork to privatenet</h3>
<p>Try to ping the internal IP of <strong>privatenet-us-vm</strong> from <strong>mynet-us-vm</strong>.</p>
<ol>
<li>
<p>On the <strong>Navigation menu</strong>, click <strong>Compute Engine &gt; VM instances</strong>.</p>
</li>
<li>
<p>Note the internal IP address for <strong>privatenet-us-vm</strong>.</p>
</li>
<li>
<p>For <strong>mynet-us-vm</strong>, click <strong>SSH</strong> to launch a terminal and connect.</p>
</li>
<li>
<p>To test connectivity to <strong>privatenet-us-vm</strong>'s internal IP, run the following command, replacing <strong>privatenet-us-vm</strong>'s internal IP:</p>
</li>
</ol>
<ql-code-block language="plaintext">
ping -c 3 &lt;Enter privatenet-us-vm's internal IP here&gt;
</ql-code-block>
<p>This should work because of the route that was established by the peering connection.</p>
<ol start="5">
<li>
<p>Close the SSH terminal to <strong>mynet-us-vm</strong>:</p>
</li>
</ol>
<ql-code-block language="plaintext">
exit
</ql-code-block>
<h3>Ping from privatenet to mynetwork</h3>
<p>Similarly, try to ping the internal IP of <strong>mynet-us-vm</strong> from <strong>privatenet-us-vm</strong>.</p>
<ol>
<li>
<p>Note the internal IP address for <strong>mynet-us-vm</strong>.</p>
</li>
<li>
<p>For <strong>privatenet-us-vm</strong>, click <strong>SSH</strong> to launch a terminal and connect.</p>
</li>
<li>
<p>To test connectivity to <strong>mynet-us-vm</strong>'s internal IP, run the following command, replacing <strong>mynet-us-vm</strong>'s internal IP:</p>
</li>
</ol>
<ql-code-block language="plaintext">
ping -c 3 &lt;Enter mynet-us-vm's internal IP here&gt;
</ql-code-block>
<p>This should also work because of the route that was established by the peering connection.</p>
<ol start="4">
<li>
<p>To test Compute Engine DNS across peered networks, run the following command:</p>
</li>
</ol>
<ql-code-block language="plaintext">
ping -c 3 mynet-us-vm
</ql-code-block>
<p><strong>Output:</strong></p>
<ql-code-block output="">
ping: mynet-us-vm: Name or service not known
</ql-code-block>
<ql-warningbox><strong>Note: </strong>Compute Engine internal DNS names created in a network are not accessible to peered networks. The IP address of the VM should be used to reach the VM instances in peered network.
</ql-warningbox>
<ol start="5">
<li>
<p>Close the SSH terminal to <strong>privatenet-us-vm</strong>:</p>
</li>
</ol>
<ql-code-block language="plaintext">
exit
</ql-code-block>
<ql-infobox><strong>Note: </strong>Now that you've verified the VPC Peering connection, you could stop both instances to remove their external IP addresses. This helps secure your instances and reduces your networking costs. You can still SSH to an instance without a public IP address using <a href="https://cloud.google.com/iap/docs/using-tcp-forwarding#tunneling_with_ssh" target="_blank">Cloud IAP tunnels.</a></ql-infobox>
<h2 id="step6">Task 4. Delete the VPC peering connection</h2>
<p>Delete the VPC Peering connection and verify the deletion.</p>
<h3>Delete the peering connection</h3>
<p>Delete the <strong>peering-1-2</strong> connection.</p>
<p><ql-true-false-probe answer="true" stem="The overall peering connection will terminate when you delete the peering-1-2 connection.">
</ql-true-false-probe></p>
<ol>
<li>On the <strong>Navigation menu</strong>, click <strong>VPC network &gt; VPC network peering</strong>.</li>
<li>Select the <strong>peering-1-2</strong> connection.</li>
<li>Click <strong>Delete</strong>.</li>
<li>Click <strong>Delete</strong> to confirm the deletion.<br>
When the connection is deleted, notice the <strong>INACTIVE</strong> status for <strong>peering-2-1</strong>.</li>
</ol>
<ql-warningbox><strong>Note: </strong>Deleting one side of the peering connection terminates the overall peering connection.
</ql-warningbox>
<h3>Verify the peering deletion</h3>
<p>Verify that <strong>routes</strong> no longer exist for the peering connection and that there is no private RFC 1918 connectivity across <strong>mynetwork</strong> and <strong>privatenet</strong>.</p>
<ol>
<li>On the <strong>Navigation menu</strong>, click <strong>VPC network &gt; Routes</strong>.<br>
Notice that the VPC Peering routes have disappeared.</li>
</ol>
<ql-warningbox><strong>Note: </strong>Deleting one side of the VPC Peering connection removes all peering routes.
</ql-warningbox>
<ol start="3">
<li>
<p>On the <strong>Navigation menu</strong>, click <strong>Compute Engine &gt; VM instances</strong>.</p>
</li>
<li>
<p>Note the internal IP address for <strong>privatenet-us-vm</strong>.</p>
</li>
<li>
<p>For <strong>mynet-us-vm</strong>, click <strong>SSH</strong> to launch a terminal and connect.</p>
</li>
<li>
<p>To test connectivity to <strong>privatenet-us-vm</strong>'s internal IP, run the following command, replacing <strong>privatenet-us-vm</strong>'s internal IP:</p>
</li>
</ol>
<ql-code-block language="plaintext">
ping -c 3 &lt;Enter privatenet-us-vm's internal IP here&gt;
</ql-code-block>
<ql-warningbox><strong>Note: </strong>This should not work as indicated by a 100% packet loss!
</ql-warningbox>
<ol start="7">
<li>
<p>Close the SSH terminal to <strong>mynet-us-vm</strong>:</p>
</li>
</ol>
<ql-code-block language="plaintext">
exit
</ql-code-block>
<h2 id="step7">Review</h2>
<p>In this lab, you configured VPC network peering between two networks (<strong>privatenet</strong> and <strong>mynetwork</strong>). Then you verified private RFC 1918 connectivity across <strong>mynetwork</strong> and <strong>privatenet</strong> by pinging VMs on their internal IP addresses within those networks. Finally, you deleted one side of the VPC network peering connection to demonstrate that this removes private RFC 1918 connectivity across those networks.</p>
<h2 id="step8">End your lab</h2>
<p>When you have completed your lab, click <strong>End Lab</strong>. Google Cloud Skills Boost removes the resources you’ve used and cleans the account for you.</p>
<p>You will be given an opportunity to rate the lab experience. Select the applicable number of stars, type a comment, and then click <strong>Submit</strong>.</p>
<p>The number of stars indicates the following:</p>
<ul>
<li>1 star = Very dissatisfied</li>
<li>2 stars = Dissatisfied</li>
<li>3 stars = Neutral</li>
<li>4 stars = Satisfied</li>
<li>5 stars = Very satisfied</li>
</ul>
<p>You can close the dialog box if you don't want to provide feedback.</p>
<p>For feedback, suggestions, or corrections, please use the <strong>Support</strong> tab.</p>
<p>Copyright 2022 Google LLC All rights reserved. Google and the Google logo are trademarks of Google LLC. All other company and product names may be trademarks of the respective companies with which they are associated.</p>

</div>
</div>


<div class='lab-content__end-lab-button js-end-lab-button-container hidden'>
<ql-lab-control-button class='js-end-lab-button' running></ql-lab-control-button>
</div>
<!-- / TODO: Move recommendations into the end lab modal -->
</div>
<div aria-label='Lab Table of Contents' class='outline-container' id='js-outline-container' role='navigation'>
<ul class='lab-content__outline js-lab-content-outline'>
<li><a href="#step1">Overview</a></li><li><a href="#step2">Setup and requirements</a></li><li><a href="#step3">Task 1. Explore connectivity between non-peered VPC networks</a></li><li><a href="#step4">Task 2. Configure VPC network peering</a></li><li><a href="#step5">Task 3. Verify private communication between peered VPC networks</a></li><li><a href="#step6">Task 4. Delete the VPC peering connection</a></li><li><a href="#step7">Review</a></li><li><a href="#step8">End your lab</a></li>
</ul>
</div>
</ql-drawer-content>
</ql-drawer-container>
</ql-drawer-content>
</ql-drawer-container>
<ql-snackbar id='alert-snackbar'></ql-snackbar>



</div>
</main>

<span class='hidden' id='flash-sibling-before'></span>
<ql-snackbar></ql-snackbar>

<script data-glue-cookie-notification-bar-category='2B' src='https://www.gstatic.com/glue/cookienotificationbar/cookienotificationbar.min.js'></script>

<ql-dialog headline='Score Details' icon='task_alt' id='jupyter-feedback-modal'>
<iframe id='jupyter-feedback-frame' srcdoc='' title='Jupyter Feedback'></iframe>
</ql-dialog>

<div class='modal fade' id='lab-details-modal'>
<div class='modal-container'>
<div class='modal-content mdl-shadow--24dp'>
<div class='modal-body'>
<p class='l-mbm'>
In this lab, you configure VPC Network Peering between two networks. Then, you verify private communication between two VMs in those networks.
</p>
<p class='small-label l-mbs'>
<strong>
Duration:
</strong>
1m setup
&middot;
60m access
&middot;
60m completion
</p>
<p class='small-label l-mbs'>
<strong>AWS Region:</strong>
[] <strong></strong>
</p>
<p class='small-label l-mbs'>
<span><strong>Levels: </strong>introductory</span>
</p>
<p class='small-label'>
<strong>
Permalink:
</strong>
<a href="https://googlecoursera.qwiklabs.com/catalog_lab/1166">https://googlecoursera.qwiklabs.com/catalog_lab/1166</a>
</p>
</div>
<div class='modal-actions'>
<a class='button button--text' data-dismiss='modal'>
Got It
</a>
</div>


</div>
</div>
<iframe class='l-ie-iframe-fix' tabindex='-1' title='modal'></iframe>
</div>
<ql-dialog headline='How satisfied are you with this lab?&lt;span aria-hidden=&quot;true&quot;&gt;*&lt;/span&gt;' id='lab-review-dialog'>
<form class="simple_form js-lab-review-form" id="new_lab_review" action="/lab_reviews" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" autocomplete="off" /><div aria-labelledby='lab-review-dialog' aria-required='true' aria-valuemax='5' aria-valuemin='0' aria-valuenow='0' class='rateit js-rateit' data-rateit-max='5' data-rateit-min='0' data-rateit-resetable='false' data-rateit-step='1' data-rateit-value='0' id='lab-review-rateit' role='slider' tabindex='0'></div>
<div class='l-mtm'>

<div class="control-group hidden lab_review_user_id"><div class="controls"><input class="hidden" autocomplete="off" type="hidden" value="12197799" name="lab_review[user_id]" id="lab_review_user_id" /></div></div>
<div class="control-group hidden lab_review_classroom_id"><div class="controls"><input class="hidden" autocomplete="off" type="hidden" name="lab_review[classroom_id]" id="lab_review_classroom_id" /></div></div>
<div class="control-group hidden lab_review_lab_id"><div class="controls"><input class="hidden" autocomplete="off" type="hidden" value="1166" name="lab_review[lab_id]" id="lab_review_lab_id" /></div></div>
<div class="control-group hidden lab_review_focus_id"><div class="controls"><input class="hidden" autocomplete="off" type="hidden" name="lab_review[focus_id]" id="lab_review_focus_id" /></div></div>
<div class="control-group hidden lab_review_rating"><div class="controls"><input class="hidden js-rating-input" autocomplete="off" type="hidden" name="lab_review[rating]" id="lab_review_rating" /></div></div>
<div class="control-group text optional lab_review_comment"><label class="text optional control-label" for="lab_review_comment">Additional Comments</label><div class="controls"><textarea class="text optional" name="lab_review[comment]" id="lab_review_comment">
</textarea></div></div>
</div>
</form><ql-button disabled id='submit' label='Submit' slot='action' text></ql-button>
</ql-dialog>

<ql-dialog headline='All done? If you end this lab, you will lose all your work. You may not be able to restart the lab if there is a quota limit. Are you sure you want to end this lab?' icon='error_outline' id='js-lab-are-you-sure-dialog'>
<ql-button id='js-are-you-sure-button' label='Submit' slot='action' text></ql-button>
</ql-dialog>


<script>
  $(function() {
    ql.initMaterialInputs();
    initChosen();
    initSearch();
    initTabs();
    ql.list.init();
    ql.favoriting.init();
    ql.header.myAccount.init();
    initTooltips();
    ql.autocomplete.init();
    ql.modals.init();
    ql.toggleButtons.init();
    ql.analytics.init();
    ql.chat.init();
  ql.jumpContent.init();
  ql.labControlPanel.addRecaptchaErrorHandler();
  initLabContent();
  ql.labOutline.links.init();
  initLabReviewModal();
  initLabReviewTranslations( {"star_amount_1":"1 of 5 stars","star_amount_2":"2 of 5 stars","star_amount_3":"3 of 5 stars","star_amount_4":"4 of 5 stars","star_amount_5":"5 of 5 stars"} )
  ql.labAssessment.init();
  ql.labData.init();
  initLabTranslations( {"are_you_sure":"All done? If you end this lab, you will lose all your work. You may not be able to restart the lab if there is a quota limit. Are you sure you want to end this lab?","in_progress":"*In Progress*","ending":"*Ending*","starting":"*Starting, please wait*","end_concurrent_labs":"Sorry, you can only run one lab at a time. To start this lab, please confirm that you want all of your existing labs to end.","copied":"Copied","no_resource":"Error retrieving resource.","no_support":"No Support","mac_press":"Press ⌘-C to copy","thanks_review":"Thanks for reviewing this lab.","windows_press":"Press Ctrl-C to copy","days":"days"} );
  ql.labRun.init();
  ql.navPanel.init();
  ql.navigation.init();
  
  });
</script>

</body>
</html>

